<!DOCTYPE html>
<html lang="fr">

<head>
	<meta charset="utf-8">
	<title>Arveto Auth Dev</title>
</head>

<body>
	<p>Ce site fournis des JWT de faux utilisateurs. <strong>À
			utiliser uniquement pour le dévelopement&#8239;!</strong></p>

	<input id=u type="url" value="http://localhost:9000"><br>
	<input id=app type="text" value="sex"><br>
	<input id=gen type="checkbox"><label for=gen>Generate (ou redirect)</label>
	<br>
	<script>
		document.addEventListener("DOMContentLoaded", () => {
			const l = new URLSearchParams(document.location.search);
			const r = l.get('r');
			document.querySelectorAll('#list a')
				.forEach(a => {
					let href = new URL(a.href);
					href.searchParams.set('r', r);
					a.href = href.toString();
				});

			const u = document.getElementById('u');
			const app = document.getElementById('app');
			const gen = document.getElementById('gen');
			app.value = l.get('app');

			function update() {
				document.querySelectorAll('#list a')
					.forEach(a => {
						let href = new URL(a.href);
						href.pathname = gen.checked ? 'generate' : 'redirect';
						href.searchParams.set('u', u.value);
						href.searchParams.set('app', app.value);
						a.href = href.toString();
					});
			}
			u.addEventListener('input', update);
			app.addEventListener('input', update);
			gen.addEventListener('input', update);
			update();
		}, {
			once: true,
		});
	</script>

	<ul id=list>
		<li><a
					href="/redirect?id=tomas&pseudo=Tomas+Benedito+Bonito&email=tomas@fai.mil&level=Visitor">Tomas
				(Visiteur)</a></li>
		<li><a
					href="/redirect?id=zech&pseudo=Zech&email=zech@fai.mil&level=Std">Zech
				(Standard)</a></li>
		<li><a
					href="/redirect?id=tzu&pseudo=Tzu+Shikaï&email=tzu@fai.mil&level=Admin">Tzu
				Shikaï (Administrateur)</a></li>
	</ul>


	<footer style="font-style: italic;">
		<a
				href="https://github.com/Arveto/arvetoAuthDev">https://github.com/Arveto/arvetoAuthDev</a><br>
		Copyright (c) 2020, Arveto Ink. All rights reserved.<br>
		Use of this source code is governed by a BSD<br>
		license that can be found in the LICENSE file.
	</footer>
</body>

</html>
